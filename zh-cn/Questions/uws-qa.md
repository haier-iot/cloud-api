# 云服务调用相关问题

**1. 用户登录后控制设备报“Token不是由此应用创建，未通过token验证”**

?> 答：app用户登录时header头中的client_id的传值，需在登录后调用平台服务时的header头中的client_id的传值保持一致性，平台服务会检查用户登录授权的accessToken与client_id请求客户端ID的一致性。



**2. 用户设备绑定时报“G20904”**

?> 答：G20904表示已超过绑定数量，解决方法：一个用户只能最多绑定300个设备，超过300个不允许绑定


**3. 调用平台的uds，ufm，udse，ums，等uws服务相关接口报签名错误**

?>  答：a)平台uws服务的签名算法为sign = sha256（url+ body+appId+appKey+timestamp），待签名字符串中的body必须过滤空格，回车字符。待签名字符串中appkey使用对应环境的值，开发appkey 在联调，开发者环境中使用，生产使用生产appkey。待签名字符串中timestamp，最好是当前时间戳。url为接口地址，端口号之后的部分，不包括get方法的参数。<br/>
b) 签名错误还有一个原因，新申请的appId可能因为没有同步到各个环境造成appkey等信息缺失，可反馈平台由技术人员解决。


**4. 标准模型与非标准模型如何区分？**

?>  答：标准模型设备是指通过海极网创建的硬件设备，在线生成的设备功能协议文档，设备TYPEID一般以2开头。
非标准模型设备主要是在海极网之前通过线下人工编写方式生成的设备功能协议文档，通常叫6位码设备，设备TYPEID一般以1或0开头。


**5. appServer无访问授权**

?>  答：调用平台服务请求接口，返回内容“appServer无访问授权”，导致此问题一般是请求url填写不正确，检查url拼写与传参。



**6. 调用第三方云登录获取iot平台token返回错误{"retCode":"A00006","retInfo":"未知错误[A00004 系统内部错误[应用无授权]]"}**

?>  答：导致此问题的原因一般是Iot云平台回调第三方接口验证授权码失败，比如回调地址不通，回调返回的参数格式不正确等，请第三方检查确定回调接口。

**7. 使用平台服务，返回码G20202，“当前用户与该设备不匹配”**

?>  答：用户没有操作设备的权限，需检查用户是否绑定设备或有控制设备的权限。

**8. 设备Oauth授权获取token时，报{"retInfo":"调用psi接口异常","retCode":"18810"}错误**

?>  答：用户中心会验证请求参数里的回调地址和海极网上填写的地址是否一致，需要核查自己输入参数回调地址与海极网上审核过的回调地址是否一致。

